<polymer-element name="fa-pages">
    <template>
        <div id="root"></div>
    </template>
    <script>
        Polymer('fa-pages', {
            pages : {},
            cPage : null,

            ready : function() {
                window.addEventListener('polymer-ready', function(e) {

                    for( var i = 0; i < this.children.length; i++ ) {
                        for( var j = 0; j < this.children[i].hash.length; j++ ) {
                            this.pages[this.children[i].hash[j]] = this.children[i];
                        }
                    }

                    $(window).on('hashchange', function(){
                        this.update();
                    }.bind(this));

                    this.update();
                }.bind(this));

                
            },

            update : function() {
                var hash = window.location.hash.replace(/#/g, '').split('/')[0];

                if( this.pages[hash] && this.pages[hash] != this.cPage ) {
                    $(this.cPage).remove();
                    this.cPage = this.pages[hash];
                    this.$.root.appendChild(this.cPage);
                }
            }
        });
    </script>
</polymer-element>