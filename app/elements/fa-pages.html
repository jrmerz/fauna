<dom-module id="fa-pages">
    <template>
        <content></content>
    </template>
</dom-module>

<script>
  Polymer({
    is : 'fa-pages',
    attached : function() {
      this.pages = {};
      this.cPage = null;

      for( var i = 0; i < this.children.length; i++ ) {
          for( var j = 0; j < this.children[i].hash.length; j++ ) {
              this.pages[this.children[i].hash[j]] = this.children[i];
              this.children[i].style.display = 'none';
          }
      }

      $(window).on('hashchange', function(){
          this.update();
      }.bind(this));

      this.update();
    },

    update : function() {
        var hash = window.location.hash.replace(/#/g, '').replace(/^!/,'');
        hash = hash.split('/')[0];

        if( this.pages[hash] && this.pages[hash] != this.cPage ) {
            if( this.cPage ) this.cPage.style.display = 'none';
            this.cPage = this.pages[hash];
            if( hash != 'nuts' && hash != 'home') {
                window.document.title = 'Fauna - '+hash;
            }
            this.cPage.style.display = 'block';
        }
    }
  });
</script>
