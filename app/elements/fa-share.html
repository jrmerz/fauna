<polymer-element name="fa-share">
    <template>
        <style>
            :host {
                display: inline-block;
            }
            #openButton {
                cursor: pointer;
                font-weight: bold;
                font-size: 25px;
                text-shadow: 1px 1px #3999fc;
                color: #333;
            }
            #buttons {
                overflow: hidden;
                height: 0px;
                width: 0px;
                background-color: rgba(57, 153, 252, 0.82);
                box-shadow: 0 0 10px #3999fc;
                border-radius: 6px;

                transition: all 300ms ease-out;
                -moz-transition: all 300ms ease-out;
                -webkit-transition: all 300ms ease-out;
                -ms-transition: all 300ms ease-out;
            }
            #buttons div{
                padding: 5px 0;
            }

            @media(max-width: 768px) {
                #openButton {
                    font-size: 18px;
                }
            }
        </style>
        <div id="buttons">
            <div id="innerButtons" horizontal center-justified layout style="height:100%">
                <div flex self-center>
                    <div><facebook-button></facebook-button></div>

                    <div id="plusRoot"></div>

                    <div>
                        <a href='http://topwebcomics.com/vote/18836/default.aspx' target="_blank" title='Vote for Fauna Cartoon on TopWebComics!'>
                            <img style="border: 1px solid #333" src='http://topwebcomics.com/rankimages/rankimage.aspx?ImageTemplate=dynamiclink2&SiteID=18836' />
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <div id="openButton" on-click="{{open}}" style="display:inline-block">
            Share!
        </div>
    </template>
    <script>
        Polymer('fa-share', {
            opened : false,

            ready : function() {
                this.shadowRoot.querySelector('facebook-button').href = 'http://faunacartoon.com';
                $(window).on('click', this.close.bind(this));

               

                setTimeout(function(){
                    var children = $('body').children();
                    for( var i = 0; i < children.length; i++ ) {
                        var id = $(children[i]).attr('id') || '';
                        if( id.match(/plusone/i) ) {
                            var ele = $(children[i]).remove();
                            this.$.plusRoot.appendChild(ele[0]);
                            return;
                        }
                    }
                }.bind(this), 3000);
            },

            open : function(e) {
                this.opened = true;

                var ele = $(this.$.innerButtons)
                $(this.$.buttons)
                    .height('130px')
                    .width('155px')
                    .css('padding', '10px')

                this.$.buttons.style.display = "inline-block";
                this.$.openButton.style.display = "none";
                this.cancel(e);
            },

            close : function() {
                if( !this.opened ) return;

                this.opened = false;
                $(this.$.buttons)
                    .height(0)
                    .width(0)
                    .css('padding', '0px')

                this.$.openButton.style.display = "inline-block";
            },

            cancel : function(e) {
                e.stopPropagation();
                e.preventDefault();
            }

        });
    </script>
</polymer-element>